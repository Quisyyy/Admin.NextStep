<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Export Diagrams - Alumni System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .diagram-wrapper {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .diagram-wrapper h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .diagram-content {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            min-height: 400px;
        }
        svg {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }
        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        button:active {
            transform: translateY(0);
        }
        .status {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        .success { color: #22863a; }
        .error { color: #cb2431; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Alumni Management System</h1>
            <p>Professional Diagrams Export</p>
        </div>

        <!-- Data Flow Diagram -->
        <div class="diagram-wrapper">
            <h2>üìà Data Flow Diagram</h2>
            <div class="diagram-content" id="dfdContainer">
                <svg width="1600" height="1000" xmlns="http://www.w3.org/2000/svg" style="background: white;">
                    <defs>
                        <style>
                            .title { font-size: 24px; font-weight: bold; fill: #333; font-family: 'Segoe UI'; }
                            .label { font-size: 13px; fill: #000; font-family: 'Segoe UI'; font-weight: 600; }
                            .small-label { font-size: 11px; fill: #333; font-family: 'Segoe UI'; }
                            .process-box { fill: #A8E6A1; stroke: #2E8B57; stroke-width: 3; }
                            .data-store { fill: #87CEEB; stroke: #1E90FF; stroke-width: 3; }
                            .entity { fill: #FFD700; stroke: #FF8C00; stroke-width: 4; }
                            .arrow { fill: none; stroke: #3E7C99; stroke-width: 3; marker-end: url(#arrowhead); }
                            .arrow-label { font-size: 10px; fill: #2E5266; font-family: 'Segoe UI'; font-weight: 500; }
                        </style>
                        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#3E7C99" />
                        </marker>
                    </defs>
                    
                    <!-- Title -->
                    <text x="800" y="35" text-anchor="middle" class="title">Data Flow Diagram - Alumni Management System</text>
                    
                    <!-- Admin User Entity -->
                    <circle cx="100" cy="500" r="65" class="entity"/>
                    <text x="100" y="495" text-anchor="middle" class="label" font-size="18">üë§</text>
                    <text x="100" y="520" text-anchor="middle" class="label">ADMIN</text>
                    <text x="100" y="537" text-anchor="middle" class="small-label">USER</text>
                    
                    <!-- Processes -->
                    <rect x="300" y="370" width="160" height="100" class="process-box" rx="8"/>
                    <text x="380" y="405" text-anchor="middle" class="label">P1: Auth</text>
                    <text x="380" y="428" text-anchor="middle" class="small-label">Module</text>
                    
                    <rect x="520" y="370" width="160" height="100" class="process-box" rx="8"/>
                    <text x="600" y="405" text-anchor="middle" class="label">P2: Bulk</text>
                    <text x="600" y="428" text-anchor="middle" class="label">Upload</text>
                    
                    <rect x="740" y="370" width="160" height="100" class="process-box" rx="8"/>
                    <text x="820" y="405" text-anchor="middle" class="label">P3: Career</text>
                    <text x="820" y="428" text-anchor="middle" class="small-label">Tracker</text>
                    
                    <rect x="960" y="370" width="160" height="100" class="process-box" rx="8"/>
                    <text x="1040" y="405" text-anchor="middle" class="label">P4: Audit</text>
                    <text x="1040" y="428" text-anchor="middle" class="small-label">Logger</text>
                    
                    <rect x="1180" y="370" width="160" height="100" class="process-box" rx="8"/>
                    <text x="1260" y="405" text-anchor="middle" class="label">P5: Employment</text>
                    <text x="1260" y="428" text-anchor="middle" class="small-label">Manager</text>
                    
                    <!-- Data Stores -->
                    <rect x="320" y="720" width="140" height="100" class="data-store" rx="8"/>
                    <text x="390" y="755" text-anchor="middle" class="label">D1:</text>
                    <text x="390" y="775" text-anchor="middle" class="label">Alumni</text>
                    <text x="390" y="795" text-anchor="middle" class="small-label">Database</text>
                    
                    <rect x="640" y="720" width="140" height="100" class="data-store" rx="8"/>
                    <text x="710" y="755" text-anchor="middle" class="label">D2:</text>
                    <text x="710" y="775" text-anchor="middle" class="label">Career</text>
                    <text x="710" y="795" text-anchor="middle" class="small-label">Database</text>
                    
                    <rect x="960" y="720" width="140" height="100" class="data-store" rx="8"/>
                    <text x="1030" y="755" text-anchor="middle" class="label">D3:</text>
                    <text x="1030" y="775" text-anchor="middle" class="label">Audit</text>
                    <text x="1030" y="795" text-anchor="middle" class="small-label">Database</text>
                    
                    <!-- Flows -->
                    <path d="M 165 480 L 300 400" class="arrow"/>
                    <text x="210" y="430" class="arrow-label">Login</text>
                    
                    <path d="M 300 500 L 165 520" class="arrow"/>
                    <text x="210" y="535" class="arrow-label">Token</text>
                    
                    <path d="M 165 515 L 520 400" class="arrow"/>
                    <text x="330" y="440" class="arrow-label">CSV</text>
                    
                    <path d="M 600 470 L 390 720" class="arrow"/>
                    <text x="475" y="595" class="arrow-label">Insert</text>
                    
                    <path d="M 680 420 L 960 420" class="arrow"/>
                    <text x="820" y="405" class="arrow-label">Event</text>
                    
                    <path d="M 1040 470 L 1030 720" class="arrow"/>
                    <text x="1060" y="595" class="arrow-label">Log</text>
                    
                    <path d="M 460 720 L 820 470" class="arrow"/>
                    <text x="640" y="590" class="arrow-label">Query</text>
                    
                    <path d="M 820 470 L 710 720" class="arrow"/>
                    <text x="750" y="595" class="arrow-label">Store</text>
                    
                    <path d="M 1180 420 L 100 510" class="arrow"/>
                    <text x="640" y="440" class="arrow-label">Reports</text>
                </svg>
            </div>
            <div class="controls">
                <button onclick="downloadSVGAsPNG('dfdContainer', 'DATA_FLOW_DIAGRAM.png')">‚¨áÔ∏è Download as PNG</button>
                <div class="status" id="dfd-status"></div>
            </div>
        </div>

        <!-- Program Flowchart -->
        <div class="diagram-wrapper">
            <h2>üîÑ Program Flowchart</h2>
            <div class="diagram-content" id="fcContainer">
                <svg width="1200" height="1800" xmlns="http://www.w3.org/2000/svg" style="background: white;">
                    <defs>
                        <style>
                            .title-fc { font-size: 22px; font-weight: bold; fill: #333; font-family: 'Segoe UI'; }
                            .box { fill: #ADD8E6; stroke: #0047AB; stroke-width: 2; }
                            .diamond { fill: #FFFFE0; stroke: #FFD700; stroke-width: 2; }
                            .oval { stroke-width: 3; font-family: 'Segoe UI'; }
                            .start-oval { fill: #90EE90; stroke: #228B22; stroke-width: 3; }
                            .end-oval { fill: #FFB6C6; stroke: #DC143C; stroke-width: 3; }
                            .error-box { fill: #FFB6C6; stroke: #DC143C; stroke-width: 2; }
                            .loop-box { fill: #FFE4B5; stroke: #FF8C00; stroke-width: 2; }
                            .fc-label { font-size: 11px; fill: #000; font-family: 'Segoe UI'; font-weight: 500; }
                            .fc-arrow { fill: none; stroke: #0047AB; stroke-width: 2.5; marker-end: url(#fcArrowhead); }
                            .fc-arrow-label { font-size: 9px; fill: #0047AB; font-family: 'Segoe UI'; }
                        </style>
                        <marker id="fcArrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#0047AB" />
                        </marker>
                    </defs>
                    
                    <text x="600" y="35" text-anchor="middle" class="title-fc">Bulk Upload Program Flowchart</text>
                    
                    <!-- Flowchart elements -->
                    <ellipse cx="600" cy="80" rx="50" ry="35" class="start-oval"/>
                    <text x="600" y="88" text-anchor="middle" class="fc-label">START</text>
                    
                    <rect x="525" y="145" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="172" text-anchor="middle" class="fc-label">Open Upload Page</text>
                    
                    <rect x="525" y="225" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="252" text-anchor="middle" class="fc-label">Select CSV File</text>
                    
                    <rect x="525" y="305" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="332" text-anchor="middle" class="fc-label">Parse CSV</text>
                    
                    <polygon points="600,385 670,425 600,465 530,425" class="diamond"/>
                    <text x="600" y="432" text-anchor="middle" class="fc-label">File Valid?</text>
                    
                    <rect x="750" y="405" width="120" height="40" class="error-box" rx="5"/>
                    <text x="810" y="430" text-anchor="middle" class="fc-label">Show Error</text>
                    
                    <rect x="525" y="505" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="532" text-anchor="middle" class="fc-label">Preview 50 Recs</text>
                    
                    <rect x="525" y="585" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="612" text-anchor="middle" class="fc-label">Confirm Upload</text>
                    
                    <polygon points="600,665 670,705 600,745 530,705" class="diamond"/>
                    <text x="600" y="712" text-anchor="middle" class="fc-label">Confirmed?</text>
                    
                    <rect x="525" y="785" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="812" text-anchor="middle" class="fc-label">Connect DB</text>
                    
                    <rect x="525" y="865" width="150" height="50" class="loop-box" rx="5"/>
                    <text x="600" y="892" text-anchor="middle" class="fc-label">For Each Record</text>
                    
                    <rect x="525" y="945" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="972" text-anchor="middle" class="fc-label">Extract Fields</text>
                    
                    <polygon points="600,1025 670,1065 600,1105 530,1065" class="diamond"/>
                    <text x="600" y="1072" text-anchor="middle" class="fc-label">Valid?</text>
                    
                    <rect x="525" y="1145" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="1172" text-anchor="middle" class="fc-label">Insert DB</text>
                    
                    <polygon points="600,1225 670,1265 600,1305 530,1265" class="diamond"/>
                    <text x="600" y="1272" text-anchor="middle" class="fc-label">Success?</text>
                    
                    <rect x="750" y="1085" width="100" height="40" class="error-box" rx="5"/>
                    <text x="800" y="1110" text-anchor="middle" class="fc-label">Log Error</text>
                    
                    <rect x="525" y="1345" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="1372" text-anchor="middle" class="fc-label">Log Success</text>
                    
                    <polygon points="600,1425 670,1465 600,1505 530,1465" class="diamond"/>
                    <text x="600" y="1472" text-anchor="middle" class="fc-label">More Recs?</text>
                    
                    <rect x="525" y="1545" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="1572" text-anchor="middle" class="fc-label">Results Summary</text>
                    
                    <rect x="525" y="1625" width="150" height="50" class="box" rx="5"/>
                    <text x="600" y="1652" text-anchor="middle" class="fc-label">Refresh Dashboard</text>
                    
                    <ellipse cx="600" cy="1750" rx="50" ry="35" class="end-oval"/>
                    <text x="600" y="1758" text-anchor="middle" class="fc-label">END</text>
                    
                    <!-- Connecting arrows -->
                    <path d="M 600 115 L 600 145" class="fc-arrow"/>
                    <path d="M 600 195 L 600 225" class="fc-arrow"/>
                    <path d="M 600 275 L 600 305" class="fc-arrow"/>
                    <path d="M 600 355 L 600 385" class="fc-arrow"/>
                    <path d="M 670 425 L 750 425" class="fc-arrow"/>
                    <text x="700" y="415" class="fc-arrow-label">NO</text>
                    <path d="M 810 445 L 810 490 L 600 490 L 600 225" class="fc-arrow"/>
                    <path d="M 600 465 L 600 505" class="fc-arrow"/>
                    <text x="615" y="485" class="fc-arrow-label">YES</text>
                    <path d="M 600 555 L 600 585" class="fc-arrow"/>
                    <path d="M 600 635 L 600 665" class="fc-arrow"/>
                    <path d="M 530 705 L 400 705 L 400 250 L 525 250" class="fc-arrow"/>
                    <text x="420" y="475" class="fc-arrow-label">NO</text>
                    <path d="M 600 745 L 600 785" class="fc-arrow"/>
                    <text x="615" y="765" class="fc-arrow-label">YES</text>
                    <path d="M 600 835 L 600 865" class="fc-arrow"/>
                    <path d="M 600 915 L 600 945" class="fc-arrow"/>
                    <path d="M 600 995 L 600 1025" class="fc-arrow"/>
                    <path d="M 530 1065 L 450 1065 L 450 1500 L 600 1500" class="fc-arrow"/>
                    <text x="470" y="1280" class="fc-arrow-label">NO</text>
                    <path d="M 600 1105 L 600 1145" class="fc-arrow"/>
                    <text x="615" y="1125" class="fc-arrow-label">YES</text>
                    <path d="M 600 1195 L 600 1225" class="fc-arrow"/>
                    <path d="M 670 1265 L 750 1265 L 750 1110" class="fc-arrow"/>
                    <text x="750" y="1185" class="fc-arrow-label">NO</text>
                    <path d="M 600 1305 L 600 1345" class="fc-arrow"/>
                    <text x="615" y="1325" class="fc-arrow-label">YES</text>
                    <path d="M 800 1125 L 800 1360 L 675 1360" class="fc-arrow"/>
                    <path d="M 600 1395 L 600 1425" class="fc-arrow"/>
                    <path d="M 670 1465 L 850 1465 L 850 890 L 675 890" class="fc-arrow"/>
                    <text x="800" y="1180" class="fc-arrow-label">YES</text>
                    <path d="M 600 1505 L 600 1545" class="fc-arrow"/>
                    <text x="615" y="1525" class="fc-arrow-label">NO</text>
                    <path d="M 600 1595 L 600 1625" class="fc-arrow"/>
                    <path d="M 600 1675 L 600 1715" class="fc-arrow"/>
                </svg>
            </div>
            <div class="controls">
                <button onclick="downloadSVGAsPNG('fcContainer', 'PROGRAM_FLOWCHART.png')">‚¨áÔ∏è Download as PNG</button>
                <div class="status" id="fc-status"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        async function downloadSVGAsPNG(containerId, filename) {
            const container = document.getElementById(containerId);
            const statusId = containerId === 'dfdContainer' ? 'dfd-status' : 'fc-status';
            const status = document.getElementById(statusId);
            
            try {
                status.textContent = '‚è≥ Generating high-quality PNG...';
                status.classList.remove('success', 'error');
                
                const canvas = await html2canvas(container, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    allowTaint: true
                });
                
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                status.textContent = `‚úÖ ${filename} downloaded successfully!`;
                status.classList.add('success');
                setTimeout(() => { status.textContent = ''; }, 3000);
            } catch (err) {
                status.textContent = `‚ùå Error: ${err.message}`;
                status.classList.add('error');
            }
        }
    </script>
</body>
</html>
